# 抖音直播录制脚本

> 这是一个用于自动录制抖音直播的浏览器脚本，通过 Tampermonkey 插件在浏览器中运行。需要本地部署 nodejs 服务。

# 如果觉得不错，请点个 star 吧！

## 功能

-   支持自定义画质
-   支持自定义保存路径
-   支持 PC 直播录制，部分主播使用电脑屏幕+摄像头直播，摄像头画面会特别小，通过此脚本可以捕获到与电脑屏幕同等级别的摄像头画面

## 使用方法

1. 安装 pm2， 推荐使用高版本 nodejs
2. 使用 npm i 安装依赖
3. 使用 pm2 start start.js 启动服务
4. 安装 Tampermonkey 插件，将 script 目录中的抖音.js 脚本添加到 Tampermonkey 中
5. 打开抖音[个人主页](https://www.douyin.com/user/self) 并登录

## 配置

#### 在"用户.json"中配置用户信息，

-   name 是用户名或自己备注的昵称，同时也是保存到本地的文件夹名称，会自动过滤特殊符号。当不填写 id 的时候，会自动查找当前 name 的用户是否正在直播
-   id 是用户的房间号，网页打开用户直播的时候可以获取到，如https://live.douyin.com/123456，id就是 123456
-   active 是布尔值，支持 true 和 false。true 表示录制该用户，false 会忽略该用户。点击 UI 界面中的终止按钮会将用户的 active 改成 false 状态
-   qu 是录制的清晰度，FULL_HD1 是原画，HD1 是 720p，SD1 是 480p，SD2 是 540p(默认)。可以在脚本中修改默认画质
-   保存路径 douyin_path: "E:/录制-1/download/" ，结尾必须带 / ，不然可能会导致保存位置不正确，但是还是会保存成功

#### 回滚画质与基础画质

-   base_zhiliang 是录制的基础画质，默认是 540p(SD2)。
-   fallback_zhiliang 是回退的画质，部分主播画质不存在 HD1 和 SD2 的，自动回滚就会使用 fallback_zhiliang 的画质，推荐使用默认的 FULL_HD1

## 注意事项

-   录制的用户必须是你已经关注的用户，否则无法录制
-   录制期间需要一致保持个人主页打开状态，因为获取最新直播用户是通过刷新完成的，edge 浏览器配置从不让这些站点进入睡眠状态添加白名单即可。
-   最好使用虚拟机运行可以不受休眠影响。虚拟机一致打开个人主页，个人 PC 要处理其它任务很容易导致浏览器页面无法刷新

## 其它

-   本项目仅供学习和研究使用，请勿用于商业用途。
-   本项目中的脚本代码仅供参考，不保证其正确性和安全性，请根据您的需求自行修改。
-   如果您有任何建议或问题，请随时提交 issue 或 pull request。
